<!--break in text area and nav controls binded to arrow keys-->

<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<link href='fullcalendar.css' rel='stylesheet' />
<link href='fullcalendar.print.css' rel='stylesheet' media='print' />
<script src='lib/moment.min.js'></script>
<script src='lib/jquery.min.js'></script>
<script src='fullcalendar.min.js'></script>
<script>

	$(document).ready(function() {



		$('#calendar').fullCalendar({
			fixedWeekCount: false,

			//date holds a 'moment' which we should be able
			// to use for the navigation buttons
			dayClick: function(date, jsEvent, view) {
				$('#prev').attr('onclick','').unbind('click');
				$('#next').attr('onclick','').unbind('click');
				$('#today').attr('onclick', '').unbind('click');

			
	        //alert('Clicked on: ' + date.format());

	        //go to the selected date so we can use
	        // navigation buttons later
	        $('#calendar').fullCalendar('gotoDate', date);

	        /*
	        alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);

	        alert('Current view: ' + view.name);
	        */
	        var escaped = date.format('LL') + "\n\n";
			$('#text_area').html(escaped.replace(/\n/g, '<br />'));

			$('#text_area').append('Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.');
			/*

	        $('#text_area').text(date.format('LL') + '\nFour score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.');
			*/

	        $('#my_popup').popup('show');

	        //bind previous button
	        $('#prev').click(function() {

	        	//show today button
	        	//$('#today').css('display', 'true');

	        	var cur_day = $('#calendar').fullCalendar('getDate');
	        	//alert('The current date is ' + cur_day.format());
	        	
	        	//switch view from month to day
	        	$('#calendar').fullCalendar('changeView', 'basicDay');
	        	//call .prev() to go back one day
	        	$('#calendar').fullCalendar('prev');
	        	//call getDate to get moment for that day
	        	var prev_day = $('#calendar').fullCalendar('getDate');
	        	//bootleg the dayClick function
	        	view.trigger('dayClick', prev_day, prev_day, null);
	        	//set view back to month
	        	$('#calendar').fullCalendar('changeView', 'month');

	        	//alert('The previous date is ' + prev_day.format());

	        });

	        //bind next button
	        $('#next').click(function() {

	        	//show today button
	        	//$('#today').css('display', 'true');

	        	var cur_day = $('#calendar').fullCalendar('getDate');
	        	//alert('The current date is ' + cur_day.format());
	        	
	        	//switch view from month to day
	        	$('#calendar').fullCalendar('changeView', 'basicDay');
	        	//call .prev() to go forward one day
	        	$('#calendar').fullCalendar('next');
	        	//call getDate to get moment for that day
	        	var next_day = $('#calendar').fullCalendar('getDate');
	        	//bootleg the dayClick function
	        	view.trigger('dayClick', next_day, next_day, null);
	        	//set view back to month
	        	$('#calendar').fullCalendar('changeView', 'month');

	        	//alert('The previous date is ' + prev_day.format());

	        });

	        //bind today button
	        $('#today').click(function() {
	        	var cur_day = $('#calendar').fullCalendar('getDate');
	        	//alert(cur_day + ' ' + cur_day.format('LL'));
	        	//alert('The current date is ' + cur_day.format());

	        	$('#calendar').fullCalendar('today');

	        	var go_today1 = $('#calendar').fullCalendar('getDate');
	        	var go_today2 = $('#calendar').fullCalendar('getDate');
	        	//alert(go_today1 + ' ' + go_today1.format('LL'));
	        	//go_today1.format();

	        	if (cur_day.format('LL') == go_today1.format('LL')) {
	        		//$('#today').css('display', 'none');
	        		//alert('hi, you are at today already');
	        	}

	        	view.trigger('dayClick', go_today2, go_today2, null);
	        });


	        // change the day's background color just for fun
	        //$(this).css('background-color', 'red');
	    	}
			
		});

	});

	$(document).keydown(function(e){
    if (e.keyCode == 37) { 
        $('#calendar').fullCalendar('prev');
        return false;
    }
    if (e.keyCode == 38) { 
        $('#calendar').fullCalendar('prevYear');
        return false;
    }
    if (e.keyCode == 39) { 
        $('#calendar').fullCalendar('next');
        return false;
    }
    if (e.keyCode == 40) { 
        $('#calendar').fullCalendar('nextYear');
        return false;
    }
	});


	

</script>
<style>

	body {
		margin: 40px 10px;
		padding: 0;
		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
		font-size: 14px;
	}

	#calendar {
		max-width: 900px;
		margin: 0 auto;
	}

	
	#my_popup_wrapper,
	#my_popup_background {
	  -webkit-tranzition: all 0.3s;
	     -moz-tranzition: all 0.3s;
	          transition: all 0.3s;
	}

	#my_popup {
    -webkit-transform: scale(0.8);
       -moz-transform: scale(0.8);
        -ms-transform: scale(0.8);
            transform: scale(0.8);
	}
	.popup_visible #my_popup {
	    -webkit-transform: scale(1);
	       -moz-transform: scale(1);
	        -ms-transform: scale(1);
	            transform: scale(1);
	}


</style>
</head>
<body>


	<div id='calendar'></div>

	<!-- Add an optional button to open the popup -->
	<button class="my_popup_open">Open popup</button>

	<!-- Add content to the popup -->
	<div id="my_popup">

		<div style="position: relative">
			<img border="4" style="border-radius: 25px;" src="https://100dialysis.files.wordpress.com/2013/03/blank-page.jpg" alt="Ah sheit" width="773.12" height="965.12">
			<div style="position:absolute;left:50px;top:50px; font-size: 32px;display: true">
				<p id="text_area">
	      		Test
	      		</p>
	    	</div>

	    	<img id="prev" src="http://i.imgur.com/Hxs2ZN5.png" style="width: 45px; height: 45px; position:absolute; left:4px; top:4px; cursor: pointer;"></img>

	    	<img id="next" src="http://i.imgur.com/OAWjHAv.png" style="width: 45px; height: 45px; position:absolute; right:4px; top:4px; cursor: pointer;"></img>

	    	<div style="width:100px; height:50px; margin-right:auto; margin-left:auto;">
			<img id="today" src="http://i.imgur.com/1kSc5pN.png" style="height: 45px; border: solid 2px; border-radius: 25px; position:absolute; margin:auto; top:4px; cursor: pointer;"></img>
			</div>    	

	</div>

	</div>

	<!-- Include jQuery -->


	<!-- Include jQuery Popup Overlay -->
	<script src="lib/jquery-popup-overlay-gh-pages/jquery.popupoverlay.js"></script>

	<script>
	$(document).ready(function() {

	  // Initialize the plugin
	  $('#my_popup').popup();

	});
	</script>



</body>
</html>
